// app/test-quote.ts (run in a dev route or a small script)
// Simulate SMT CSV -> normalized intervals -> quote
import { parseSmtCsvToIntervals } from '@/lib/smt/adapter';

const csv = `Date,Interval End,kWh
2025-08-01,00:15,0.18
2025-08-01,00:30,0.16
2025-08-01,00:45,0.14
2025-08-01,01:00,0.12
2025-08-01,01:15,0.11
2025-08-01,01:30,0.13
2025-08-01,01:45,0.15
2025-08-01,02:00,0.14
2025-08-01,02:15,0.12
2025-08-01,02:30,0.11
2025-08-01,02:45,0.13
2025-08-01,03:00,0.15
2025-08-01,03:15,0.14
2025-08-01,03:30,0.12
2025-08-01,03:45,0.11
2025-08-01,04:00,0.13
2025-08-01,04:15,0.15
2025-08-01,04:30,0.14
2025-08-01,04:45,0.12
2025-08-01,05:00,0.11
2025-08-01,05:15,0.13
2025-08-01,05:30,0.15
2025-08-01,05:45,0.14
2025-08-01,06:00,0.12
2025-08-01,06:15,0.11
2025-08-01,06:30,0.13
2025-08-01,06:45,0.15
2025-08-01,07:00,0.14
2025-08-01,07:15,0.12
2025-08-01,07:30,0.11
2025-08-01,07:45,0.13
2025-08-01,08:00,0.15
2025-08-01,08:15,0.14
2025-08-01,08:30,0.12
2025-08-01,08:45,0.11
2025-08-01,09:00,0.13
2025-08-01,09:15,0.15
2025-08-01,09:30,0.14
2025-08-01,09:45,0.12
2025-08-01,10:00,0.11
2025-08-01,10:15,0.13
2025-08-01,10:30,0.15
2025-08-01,10:45,0.14
2025-08-01,11:00,0.12
2025-08-01,11:15,0.11
2025-08-01,11:30,0.13
2025-08-01,11:45,0.15
2025-08-01,12:00,0.14
2025-08-01,12:15,0.12
2025-08-01,12:30,0.11
2025-08-01,12:45,0.13
2025-08-01,13:00,0.15
2025-08-01,13:15,0.14
2025-08-01,13:30,0.12
2025-08-01,13:45,0.11
2025-08-01,14:00,0.13
2025-08-01,14:15,0.15
2025-08-01,14:30,0.14
2025-08-01,14:45,0.12
2025-08-01,15:00,0.11
2025-08-01,15:15,0.13
2025-08-01,15:30,0.15
2025-08-01,15:45,0.14
2025-08-01,16:00,0.12
2025-08-01,16:15,0.11
2025-08-01,16:30,0.13
2025-08-01,16:45,0.15
2025-08-01,17:00,0.14
2025-08-01,17:15,0.12
2025-08-01,17:30,0.11
2025-08-01,17:45,0.13
2025-08-01,18:00,0.15
2025-08-01,18:15,0.14
2025-08-01,18:30,0.12
2025-08-01,18:45,0.11
2025-08-01,19:00,0.13
2025-08-01,19:15,0.15
2025-08-01,19:30,0.14
2025-08-01,19:45,0.12
2025-08-01,20:00,0.11
2025-08-01,20:15,0.13
2025-08-01,20:30,0.15
2025-08-01,20:45,0.14
2025-08-01,21:00,0.12
2025-08-01,21:15,0.11
2025-08-01,21:30,0.13
2025-08-01,21:45,0.15
2025-08-01,22:00,0.14
2025-08-01,22:15,0.12
2025-08-01,22:30,0.11
2025-08-01,22:45,0.13
2025-08-01,23:00,0.15
2025-08-01,23:15,0.14
2025-08-01,23:30,0.12
2025-08-01,23:45,0.11`; // Sample SMT CSV data

const intervals15min = parseSmtCsvToIntervals(csv, { tz: 'America/Chicago' });

const res = await fetch('/api/recommendations/quote', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    address: '8808 Las Vegas Ct',
    city: 'White Settlement',
    state: 'TX',
    zip: '76108',
    intervals15min,
    includeRaw: false,
  }),
});
console.log(await res.json());
